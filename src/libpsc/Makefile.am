
AM_CFLAGS = -I$(top_srcdir)/src/include -I$(top_srcdir)/src/libmrc/include
AM_CXXFLAGS = -I$(top_srcdir)/src/include -I$(top_srcdir)/src/libmrc/include

SUBDIRS = \
	psc_balance \
	psc_bnd \
	psc_bnd_particles \
	psc_bnd_fields \
	psc_collision \
	psc_event_generator \
	psc_output_fields_collection \
	psc_output_fields \
	psc_output_particles \
	psc_diag \
	psc_push_fields \
	psc_push_particles \
	psc_randomize \
	psc_sort \
	psc_checks \
	psc_heating \
	psc_inject \
	fortran \
	sse2 \
	vpic \
	cuda \
	cuda2 \
	acc

noinst_LTLIBRARIES = libpsc.la

libpsc_la_LIBADD = \
	psc_balance/libsubdir.la \
	psc_bnd/libsubdir.la \
	psc_bnd_particles/libsubdir.la \
	psc_bnd_fields/libsubdir.la \
	psc_collision/libsubdir.la \
	psc_event_generator/libsubdir.la \
	psc_output_fields_collection/libsubdir.la \
	psc_output_fields/libsubdir.la \
	psc_output_particles/libsubdir.la \
	psc_diag/libsubdir.la \
	psc_push_fields/libsubdir.la \
	psc_push_particles/libsubdir.la \
	psc_randomize/libsubdir.la \
	psc_sort/libsubdir.la \
	psc_checks/libsubdir.la \
	psc_heating/libsubdir.la \
	psc_inject/libsubdir.la \
	cuda2/libsubdir.la

if USE_SSE2
libpsc_la_LIBADD += \
	sse2/libsubdir.la
endif USE_SSE2

if USE_VPIC
libpsc_la_LIBADD += \
	vpic/libsubdir.la
endif USE_VPIC

if USE_CUDA
libpsc_la_LIBADD += \
	cuda/libsubdir.la
endif USE_CUDA

if USE_ACC
libpsc_la_LIBADD += \
	acc/libsubdir.la
endif USE_ACC

if USE_CBE

SUBDIRS += cell_be

libpsc_la_LIBADD += \
	cell_be/libsubdir.la

endif USE_CBE

if USE_FORTRAN
libpsc_la_LIBADD += \
	fortran/libsubdir.la
endif

libpsc_la_SOURCES = \
	mfields.cxx \
	mparticles.cxx \
	psc_fields_fortran.cxx \
	psc_fields_c.cxx \
	psc_fields_single.cxx \
	psc_particles_fortran.cxx \
	psc_particles_single.cxx \
	psc_particles_double.cxx \
	psc_particles_single_by_block.cxx \
	psc_particles_single_by_kind.cxx \
	bk_mparticles.cxx \
	psc.cxx \
	psc_method.cxx \
	psc_method_default.cxx \
	integrate.cxx \
	psc_stats.cxx \
	psc_checkpoint.cxx \
	rngpool.cxx \
	psc_main.cxx

#	psc_particles_cbe.c
